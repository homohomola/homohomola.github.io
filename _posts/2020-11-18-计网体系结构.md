---
layout:     post
title:      计算机网络体系结构
subtitle:   计网概述
date:       2020-11-18
author:     sakura
header-img: img/the-first.png
catalog: true
tags:
    - 计算机网络
---

# 1 计算机网络体系结构





## 1.1 计算机网络在信息时代中的作用

 - 网络、互连网、互联网的概念
 - 互联网重要特性**连通性**和**共享**

## 1.2 互联网概述

### 1.2.1 网络的网络

- 计算机网络（Network）由若干**节点**（Node）和连接节点的**链路**（Link）组成

- 网络间通过路由器互连起来，形成更大的网络，因此**互联网**是网络的网络

### 1.2.2 互联网发展的三个阶段

 - 第一阶段（1969年）
    - 从单个网络ARPANET向互联网发展
        - 1983年，TCP/IP协议成为ARPANET的标准协议（因特网诞生）
- 第二阶段（1985年）
    - 逐步建成**三级构造的因特网**
    - NSF围绕六个大型计算机中心建设NSFNET——主干网、地区网、校园网（企业网）
    - 1991年，因特网主干网交给私人公司经营
- 第三阶段（1993年）
    - 逐步形成多层次ISP结构的因特网
    - 1994年，万维网WWW技术使得互联网迅速发展
    - IXP互联网交换点技术允许两个网络直接相连并交换分组

### 1.2.3 互联网的标准化工作

 - 标准化工作对发展有重要作用

    ```mermaid
    graph TB

    a[互联网协会ISOC]
    b[互联网体系结构委员会IAB]
    c[互联网工程部IETF]
    d[互联网研究部IRTF]
    a-->b
    b-->c
    b-->d
    ```

- 制定互联网的正式标准阶段

    - 互联网草案
    - 建议标准（RFC文档）
    - 互联网标准

## 1.3 互联网组成

功能组成

- 通信子网
    - 由传输介质、通信设备、相应协议组成，为网络提供数据传输、交换和控制能力<u>包括物理、数据链路、网络层</u>
- 资源子网
    - 由主机、终端以及各种软件信息资源组成、负责全网的数据交换、向网络用户提供服务

从工作方式上看

 - 边缘部分
    - 由所有连接在互联网上的主机组成，进行资源共享
 - 核心部分
    - 由大量网络和路由器构成
        - 为**边缘部分提供服务**（提供连通性和交换）

### 1.3.1 互联网的边缘部分

- 边缘部分的主机又称**端系统**（end system）
- **主机A的某个进程与主机B的某个进程进行通信**（计算机间通信）
- 两大通信方式
    - 客户-服务器模式（C/S模式）
        - **客户（client）**和**服务器（sever）**都是通信中的两个进程
        - **客户是服务请求方，服务器是服务提供方**
            - 客户程序主动请求服务，必须知道服务器地址
            - 服务器程序，可同时处理多个请求，一直运行被动接受通信请求，不需要知道客户程序地址
            - 服务器需要强大硬件和高级操作系统支持
    - 对等连接方式P2P（peer-to-peer）
        - 对等连接中的每一台主机既是客户又是服务器

### 1.3.2 互联网的核心部分

​	在网络核心部分起特殊作用的是**路由器**（router），一种专用计算机（不是主机）。实现**分组交换**的关键构件，**转发收到的分组**

​	**三种交换方式**

 - 电路交换

    - 电话交换机接通电话线的方式

    - **交换**（switching）就是按照某种方式<u>动态分配传输线路的资源</u>

    - 电路交换的三个步骤

        - 建立连接（分配占用资源）
            - 通话（一直占用通信资源）
                - 释放连接（归还通信资源）

    - 电路交换的特点

        > **在通话的全部时间内**，**通话的两个用户始终占用端到端的通信资源**
        >
        > **整个报文的比特流连续从源点直达终点**

    - 电路交换用来传输计算机数据时，线路的传输效率往往很低（计算机数据具有突发性）

 - 分组交换

    - 特点
        - 单个分组，传送到相邻节点，存储后查表转发到下个结点
    - 原理
        - 分组交换采用**存储转发**技术，把要发送的整块数据称为**报文**（message）。
        - 发送报文前，将报文划分为更小等长数据端，在每个数据端前加上必要的控制信息（首部），构成分组（包）
         - 分组（包）是互联网中传输的数据单元
         - 路由器用来转发分组，以存储转发的方式，将包送到目标主机
         - 分组存储在路由器的内存中，保证较高的交换数据
    - 优点
        - 高效	动态分配带宽，逐段占用通信链路
        - 灵活    为每个分组选择最合适的线路
        - 迅速     以分组为传送单位，可以不先建立连接
        - 可靠     网络协议，分布式多路由的分组交换网
    - 问题
        - 分组在路由器存储转发时需要排队，产生**时延**
        - 各分组需要额外携带控制信息，造成额外开销
        - 整个分组交换网需要专门的管理控制机制

 - 报文交换

    - 不对报文进行分组
    - 整个报文传送到相邻节点，全部存储后查找转发表，转发到下个结点（时延较长）

 - 三种交换分析

    - 若要传送大量数据，且传送时间远大于建立时间，则电路交换的传输速率高
        - 报文交换与分组交换不需要预先分配带宽，能提高信道利用率
            - 分组交换比报文交换时延小，灵活性好

## 1.4 计算机网络类别+

### 1.4.1 计算机网络的定义

**简单定义**

> 一些**互相连接**、**自治**的计算机集合

**较好定义**

> 计算机网络主要是由一些通用的、**可编程**的硬件互连构成的。这些硬件能够传送多种类型的数据，并支持广泛的和日益增加的应用

### 1.4.2 计算机网络的分类

 1. 按作用范围

    - 广域网WAN(Wide Area Network)
    - 城域网MAN(Metropolitan Area Network)
    - 局域网LAN(Local Area Network)
    - 个人区域网PAN(Personal Area Network)

 2. 按使用者

    - 公用网(public network)
    - 专用网(private network)

    3. 按传输介质

    - 有线网络
    - 无线网络

    4. 按交换技术（三种交换）

    5. **按拓扑结构**

    - **总线型**
    - **星型**
    - **环形**
    - **网状型**

    **拓展--接入网AN（Acess Network）**

    > 从用户端系统到互联网第一个路由器（边缘路由器）



## 1.5 计算机网络性能+

### 	1.5.1 性能指标

 1. 速率（b/s）

    主机在信道上传输的速率，也称**比特率**或**数据率** bps（bit peer second)

    表示速率时，k=10^3.

 2. 带宽(bandwidth)

    - 模拟信号中，带宽指该信号所包含的各种不同频率成分所占据的频率范围，单位赫。
    - 计网中，带宽表示信道传输数据的能力，单位时间内信道所能通过的**最高数据率**，单位b/s

	3. 吞吐量(throughput)

    - 单位时间内通过网络的**实际**数据量，单位 b/s
    - 受网路的带宽或额定速率的限制

	4. **时延**

    - 发送时延

        - **主机或路由器发送数据帧所需的时间**

        - 从发送数据帧的第一个比特，到该帧的最后一个比特完毕所需时间

        - $$
            发送时延（s）=\frac{数据帧长度（bit）}{发送速率（bit/s）}
            $$

    - 传播时延

        - **电磁波在信道中传播一定距离需要花费的时间**

        - $$
            传播时延（s）=\frac{信道长度（m）}{电磁波在信道上的传播速率（m/s）}
            $$

    - 处理时延

        -  主机或路由器对分组的处理

    - 排队时延

        - 分组进入路由器后现在输入、输出队列排队等待，长短取决于网络当时的通信量

	5. 时延带宽积 （bit）

    - 时延带宽积 = 传播时延 * 带宽
    - 又称 **以比特为单位的链路长度**

	6. 往返时间 RTT（Round-trip Time）

    - $$
        发送时间（s）=\frac{数据长度（bit）}{发送速率（bit/s）}
        $$

    - $$
        有效数据率（bit/s）=\frac{数据长度}{发送时间+RTT}
        $$

3. **利用率**

    - 信道利用率

        - 信道又百分之几的时间被利用
        - 信道利用率增大时，时延也会迅速增加

    - 网络率利用率

        - 全网络信道利用率的加权平均值

    - $$
        D = \frac{D_0}{1-U}
        $$

        D表示当前时延，$ D_0 $表示网络空闲时的时延，U利用率，U一般不超过50%

4. 丢包率（分组丢包率）
    - 传输过程中**丢失分组数量与总分组数量的比率**
    - 两种丢包原因
        - 分组在传输过程中出现误码（**分组误码**）
        - 分组到达队列已满的分组交换机被丢弃（**网络拥塞**）
    - 丢包率反应网络*拥塞情况*

## 1.6 计算机网络体系结构++

### 1.6.1 协议与划分层次

网络分层的好处

- 灵活性好、结构上可分割
- 各层之间独立，易于实现和维护
- 能促进标准化

分层需要完成的功能

- 差错控制	对等层通信更加可靠
- 流量控制    数据不能发太快
- 分段和重装    划分数据块
- 复用和分用    高层共用底层一条连接
- 建立连接和释放连接

> **计算机网络网络的各层及其协议的集合**就是网络的**体系结构**

### 1.6.2 具有五层协议的体系结构

OSI参考模型

![image-20201001152400122](https://gitee.com/happy_every/note_pic/raw/master/image-20201001152400122.png)

TCP/IP

![image-20201001152739163](https://gitee.com/happy_every/note_pic/raw/master/image-20201001152739163.png)

结合了OSI/RM 的七层与TCP/IP 的四层 的五层原理协议

![image-20200928200630485](https://gitee.com/happy_every/note_pic/raw/master/image-20200928200630485.png)

- 应用层(application layer)
    - **定义应用进程间通信和交互的规则**
    - HTTP、SMTP、DNS 等协议
    - 应用层交互的数据称为**报文**

- 运输层(transport layer)
    - 向进程通信提供**通用的数据传输服务**
    - 有复用和分用的功能
    - 传输控制协议**TCP**
        - 可靠连接，传输**报文段**
    -  用户数据报协议**UDP**
        - 尽最大努力，传输**用户数据报**

- 网络层（网际层、IP层）(network layer)
    - 负责交换网上不同**主机**提供通信服务
    - 把运输层的数据封装成**IP数据报**
    - 选择合适的路由、传输分组
    - 无连接的**网际协议IP**和许多路由选择协议

- 数据链路层(data link layer)
    - 将网络层的IP数据报组装成**帧(framing)**,在**首部**和**尾部**
    - 在相邻的节点上传输**帧**，帧包含数据和控制信息

- 物理层(physical layer)
    - 传输比特(bit)

### 1.6.3 实体、协议、服务

​		**实体**

> **任何可以发送或接受信息的硬件或软件进程**

​		**协议**

> **控制两个**（**或多个**）**对等实体进行通信的规则的集合**

​	网络协议主要有三个要素

 - **语法**，定义交换信息的格式
 - **语义**，定义双方所要完成的操作
 - **同步**，定义收发双方的时序关系（事件实现顺序）



​	**接口**

> **要实现本层协议**，**还需下一层所提供的服务**，协议是水平的，服务是竖直的。

​	服务是由**下层向上层通过层间接口**提供的，只有能被高层**看见**的功能才叫服务。

- **服务原语**	上层使用下层的服务必须与下层**交换一些命令**

- **服务访问点SAP**    同一系统中**相邻两层的实体交换信息的逻辑接口**，用于区分不同类型的服务
- 数据链路层访问点为 “**帧类型字段**”
    - 网路层为IP数据报首部的“**协议字段**”

- 运输层为“**端口号**”

- **协议数据单元PDU**    对等层之间传送的数据包
    - 物理层: 	比特流(bit stream)
    - 链路层:     帧(frame)
    - 网络层：    IP数据报(packet)
    - 运输层：    TCP报文段(segment)、UDP用户数据报(datagram)
    - 应用层：    报文(message)

- **服务数据单元SDU**    层与层之间交换的数据包
    - 多个SDU可以合成一个PDU、一个SDU可以划分为多个PDU

- **协议控制信息PCI**
    - SDU+PCI=PDU
- **接口控制信息ICI**
- **接口数据单元IDU**
    - IDU=SDU+ICI